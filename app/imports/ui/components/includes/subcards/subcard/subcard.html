<template name="Subcard">
  <div class="card-block card-block-collapse-toggle"  aria-expanded="false"
    {{b "click: handleToggleCollapse, class: { with-error: hasError, new: !this._id, collapsed: collapsed }, ref: subcard"}}>
    <span {{b "html: _lText"}}></span>
    {{#if isNew}}
      <span class="label label-primary">New</span>
    {{/if}}
    {{#if _rText}}
      <span class="pull-xs-right" {{b "html: _rText"}}></span>
    {{/if}}
  </div>
  <div class="card-block-collapse collapse" {{b "ref: collapse"}}>
    <div class="collapse subcard-error-section" {{b "ref: errorSection"}}>
      <div class="card-block">
        <i class="fa fa-exclamation-circle fa-3x" aria-hidden="true"></i>
        <span {{b "text: error"}}></span>
      </div>
    </div>
    <div class="subcard-content">
      {{#unless collapsed}}
        {{> Template.dynamic template=content}}
        <div class="card-block clearfix">
          <button type="button" class="btn btn-secondary pull-xs-right"
              {{b "click: close, class: { disabled: isSaving }, disable: isSaving"}}>
            {{#if isSaving}}
              <i class="fa fa-spinner fa-pulse fa-fw margin-bottom">
              </i>
            {{/if}}
            {{#if isSaving}} Saving... {{else}} {{#if _id}} Close {{else}} Save {{/if}} {{/if}}
          </button>
          <button type="button" class="btn btn-secondary pull-xs-left" {{b "click: delete"}}>
            Delete
          </button>
        </div>
      {{/unless}}
    </div>
  </div>
</template>
